"use strict";(self.webpackChunkconsensys_asko11y_app=self.webpackChunkconsensys_asko11y_app||[]).push([[4747],{9235(e,t,a){a.d(t,{Ou:()=>c,lV:()=>o,p8:()=>l});var r=a(85959),s=a.n(r),n=a(82007);const l=({isLoading:e,message:t="Loading...",variant:a="overlay",size:r="md",showSpinner:l=!0,showProgress:c=!1,progress:o=0,transparent:i=!1,children:d,className:m=""})=>{if(!e)return s().createElement(s().Fragment,null,d);const u=s().createElement("div",{className:`flex flex-col items-center justify-center ${(()=>{switch(r){case"sm":return"text-xs";case"md":default:return"text-sm";case"lg":return"text-base";case"xl":return"text-lg"}})()}`},l&&s().createElement(n.Spinner,{size:(()=>{switch(r){case"sm":return 14;case"md":default:return 20;case"lg":return 28;case"xl":return 36}})(),className:"mb-3","aria-label":"Loading spinner"}),t&&s().createElement("div",{className:"text-secondary font-medium",role:"status","aria-live":"polite"},t),c&&o>0&&s().createElement("div",{className:"mt-3 w-48"},s().createElement("div",{className:"bg-weak rounded-full h-2 overflow-hidden"},s().createElement("div",{className:"bg-primary h-full transition-all duration-300 ease-out",style:{width:`${Math.min(100,Math.max(0,o))}%`},role:"progressbar","aria-valuenow":o,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Loading progress: ${Math.round(o)}%`})),s().createElement("div",{className:"text-center mt-1 text-xs text-secondary"},Math.round(o),"%")));return"inline"===a?s().createElement("div",{className:`relative ${m}`},d&&s().createElement("div",{className:"opacity-50 pointer-events-none"},d),s().createElement("div",{className:"flex items-center justify-center py-4"},u)):"fullscreen"===a?s().createElement(n.Portal,null,s().createElement("div",{className:`fixed inset-0 z-50 flex items-center justify-center ${i?"bg-black/30":"bg-background"} ${m}`,role:"dialog","aria-modal":"true","aria-label":t},s().createElement("div",{className:"bg-background rounded-lg shadow-lg p-8 max-w-sm w-full mx-4"},u))):s().createElement("div",{className:`relative ${m}`},d,s().createElement("div",{className:"absolute inset-0 z-10 flex items-center justify-center rounded-lg "+(i?"bg-black/20":"bg-background/90"),role:"status","aria-live":"polite","aria-label":t},u))},c=({message:e="Loading...",size:t="sm",className:a=""})=>{const r="sm"===t?12:"md"===t?16:20;return s().createElement("div",{className:`flex items-center gap-2 text-secondary ${a}`,role:"status","aria-live":"polite"},s().createElement(n.Spinner,{size:r}),e&&s().createElement("span",{className:"sm"===t?"text-xs":"text-sm"},e))},o=({isLoading:e=!1,loadingText:t="Processing...",onClick:a,disabled:r=!1,variant:l="primary",size:c="md",icon:o,children:i,className:d="",type:m="button"})=>s().createElement("button",{type:m,onClick:a,disabled:e||r,className:`\n        inline-flex items-center justify-center gap-2\n        rounded-md font-medium transition-colors\n        focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2\n        ${(()=>{if(e||r)return"bg-weak text-disabled cursor-not-allowed";switch(l){case"primary":default:return"bg-primary hover:bg-primary-shade text-primary-text";case"secondary":return"bg-secondary hover:bg-secondary-shade text-secondary-text border border-medium";case"destructive":return"bg-error hover:bg-error-shade text-error-text"}})()}\n        ${(()=>{switch(c){case"sm":return"px-3 py-1.5 text-xs";case"md":default:return"px-4 py-2 text-sm";case"lg":return"px-6 py-3 text-base"}})()}\n        ${d}\n      `,"aria-busy":e,"aria-disabled":e||r},e?s().createElement(s().Fragment,null,s().createElement(n.Spinner,{size:"sm"===c?12:"md"===c?14:16}),s().createElement("span",null,t)):s().createElement(s().Fragment,null,o,i))},24747(e,t,a){a.d(t,{MCPStatus:()=>v});var r=a(85959),s=a.n(r),n=a(82007),l=a(31269),c=a(18531);function o(e,t,a,r,s,n,l){try{var c=e[n](l),o=c.value}catch(e){return void a(e)}c.done?t(o):Promise.resolve(o).then(r,s)}function i(e){return function(){var t=this,a=arguments;return new Promise(function(r,s){var n=e.apply(t,a);function l(e){o(n,r,s,l,c,"next",e)}function c(e){o(n,r,s,l,c,"throw",e)}l(void 0)})}}const d=new class{fetchServerStatuses(){return i(function*(){try{const e=yield(0,l.firstValueFrom)((0,c.getBackendSrv)().fetch({url:`${this.baseUrl}/api/mcp/servers`,method:"GET"}));if(!e||!e.data)throw new Error("No response from backend");return e.data}catch(e){return console.error("[MCPServerStatusService] Failed to fetch server statuses:",e),{servers:[],systemHealth:{overallStatus:"unhealthy",healthy:0,degraded:0,unhealthy:0,disconnected:0,total:0}}}}).call(this)}fetchServerStatus(e){return i(function*(){return(yield this.fetchServerStatuses()).servers.find(t=>t.serverId===e)||null}).call(this)}constructor(){var e,t,a;a=void 0,(t="baseUrl")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,this.baseUrl="/api/plugins/consensys-asko11y-app/resources"}};var m=a(9235);function u(e,t,a,r,s,n,l){try{var c=e[n](l),o=c.value}catch(e){return void a(e)}c.done?t(o):Promise.resolve(o).then(r,s)}function h(e){return function(){var t=this,a=arguments;return new Promise(function(r,s){var n=e.apply(t,a);function l(e){u(n,r,s,l,c,"next",e)}function c(e){u(n,r,s,l,c,"throw",e)}l(void 0)})}}function v({compact:e=!1,showDetails:t=!0,className:a="",onClose:l}){const c=(0,n.useTheme2)(),[o,i]=(0,r.useState)([]),[u,v]=(0,r.useState)({overallStatus:"healthy",healthy:0,degraded:0,unhealthy:0,disconnected:0,total:0}),[f,x]=(0,r.useState)(!1),[E,b]=(0,r.useState)(!0),N=()=>h(function*(){const e=yield d.fetchServerStatuses();i(e.servers),v(e.systemHealth),b(!1)})();(0,r.useEffect)(()=>{N();const e=setInterval(N,3e4);return()=>clearInterval(e)},[]);const w=e=>{switch(e){case"healthy":return"check-circle";case"degraded":return"exclamation-triangle";case"unhealthy":case"disconnected":return"times-circle";case"connecting":return"spinner";default:return"question-circle"}};return E?s().createElement("div",{className:`inline-flex items-center gap-2 ${a}`},s().createElement(m.Ou,{size:"sm"}),s().createElement("span",{className:"text-xs text-secondary"},"Loading MCP status...")):e?s().createElement("div",{className:`inline-flex items-center gap-2 ${a}`},s().createElement(n.Tooltip,{content:s().createElement("div",{className:"p-2"},s().createElement("div",{className:"font-medium mb-2"},"MCP Server Status"),s().createElement("div",{className:"text-xs space-y-1"},s().createElement("div",null,"Healthy: ",u.healthy),s().createElement("div",null,"Degraded: ",u.degraded),s().createElement("div",null,"Unhealthy: ",u.unhealthy),s().createElement("div",null,"Disconnected: ",u.disconnected)))},s().createElement("div",{className:"flex items-center gap-2 cursor-help"},s().createElement(n.Icon,{name:w("healthy"===u.overallStatus?"healthy":"degraded"===u.overallStatus?"degraded":"unhealthy"),size:"sm",style:{color:p("healthy"===u.overallStatus?"healthy":"degraded"===u.overallStatus?"degraded":"unhealthy",c)}}),s().createElement("span",{className:"text-xs text-secondary"},u.healthy,"/",u.total," MCP")))):s().createElement("div",{className:`rounded-lg p-4 ${a}`,style:{backgroundColor:c.colors.background.secondary,border:`1px solid ${c.colors.border.weak}`}},s().createElement("div",{className:"flex items-center justify-between mb-4"},s().createElement("div",{className:"flex items-center gap-3"},s().createElement("h3",{className:"text-sm font-medium"},"MCP Server Status"),(()=>{const e="healthy"===u.overallStatus?"green":"degraded"===u.overallStatus?"orange":"red";return s().createElement(n.Badge,{text:u.overallStatus.toUpperCase(),color:e,icon:w("healthy"===u.overallStatus?"healthy":"degraded"===u.overallStatus?"degraded":"unhealthy")})})()),s().createElement("div",{className:"flex items-center gap-2"},s().createElement(n.Button,{size:"sm",variant:"secondary",icon:"sync",onClick:N,"aria-label":"Refresh statuses"},"Refresh"),s().createElement(n.Button,{size:"sm",variant:"secondary",icon:f?"angle-up":"angle-down",onClick:()=>x(!f)},f?"Hide":"Show"," Details"))),t&&s().createElement("div",{className:"grid grid-cols-4 gap-4 mb-4"},s().createElement(g,{label:"Healthy",value:u.healthy,color:c.colors.success.main,icon:"check-circle"}),s().createElement(g,{label:"Degraded",value:u.degraded,color:c.colors.warning.main,icon:"exclamation-triangle"}),s().createElement(g,{label:"Unhealthy",value:u.unhealthy,color:c.colors.error.main,icon:"times-circle"}),s().createElement(g,{label:"Disconnected",value:u.disconnected,color:c.colors.text.disabled,icon:"unlink"})),f&&s().createElement("div",{className:"space-y-2 mt-4"},0===o.length?s().createElement("div",{className:"text-center py-4 text-secondary"},"No MCP servers configured"):o.map(e=>s().createElement(y,{key:e.serverId,server:e,onRefresh:N}))))}function g({label:e,value:t,color:a,icon:r}){const l=(0,n.useTheme2)();return s().createElement("div",{className:"p-3 rounded",style:{backgroundColor:l.colors.background.primary,border:`1px solid ${l.colors.border.weak}`}},s().createElement("div",{className:"flex items-center gap-2 mb-1"},s().createElement(n.Icon,{name:r,size:"sm",style:{color:a}}),s().createElement("span",{className:"text-xs text-secondary"},e)),s().createElement("div",{className:"text-2xl font-bold",style:{color:a}},t))}function y({server:e,onRefresh:t}){const a=(0,n.useTheme2)(),[l,c]=(0,r.useState)(!1),[o,i]=(0,r.useState)(!1);return s().createElement("div",{className:"rounded",style:{backgroundColor:a.colors.background.primary,border:`1px solid ${a.colors.border.weak}`}},s().createElement("div",{className:"p-3 flex items-center justify-between"},s().createElement("div",{className:"flex items-center gap-3"},"connecting"===e.status?s().createElement(m.Ou,{size:"sm"}):s().createElement(n.Icon,{name:f(e.status),size:"lg",style:{color:p(e.status,a)}}),s().createElement("div",null,s().createElement("div",{className:"font-medium"},e.name),s().createElement("div",{className:"text-xs text-secondary"},e.type," â€¢ ",e.url),s().createElement("div",{className:"text-xs text-secondary"},"healthy"===e.status&&`${e.responseTime}ms response time`,"degraded"===e.status&&`Slow response (${e.responseTime}ms)`,"unhealthy"===e.status&&`${e.consecutiveFailures} failures`,"disconnected"===e.status&&"Connection lost","connecting"===e.status&&"Connecting..."))),s().createElement("div",{className:"flex items-center gap-2"},s().createElement(n.Tooltip,{content:`${e.toolCount} tools available. Click to view.`},s().createElement(n.Button,{size:"sm",variant:"secondary",onClick:()=>i(!o)},e.toolCount," ",1===e.toolCount?"tool":"tools")),void 0!==e.successRate&&s().createElement(n.Tooltip,{content:`Success rate: ${e.successRate.toFixed(1)}%`},s().createElement(n.Badge,{text:`${e.successRate.toFixed(0)}%`,color:e.successRate>=95?"green":e.successRate>=80?"orange":"red"})),s().createElement(n.Tooltip,{content:`Last checked: ${new Date(e.lastCheck).toLocaleTimeString()}`},s().createElement("span",{className:"text-xs text-secondary"},function(e){const t=Math.floor(((new Date).getTime()-e.getTime())/1e3);if(t<60)return"just now";if(t<3600)return`${Math.floor(t/60)}m ago`;if(t<86400)return`${Math.floor(t/3600)}h ago`;return`${Math.floor(t/86400)}d ago`}(new Date(e.lastCheck)))),s().createElement(n.Button,{size:"sm",variant:"secondary",icon:l?"spinner":"sync",onClick:()=>h(function*(){c(!0),yield t(),setTimeout(()=>c(!1),500)})(),disabled:l,"aria-label":"Refresh status"}))),o&&e.tools.length>0&&s().createElement("div",{className:"p-3 border-t",style:{borderColor:a.colors.border.weak}},s().createElement("div",{className:"text-sm font-medium mb-2"},"Available Tools:"),s().createElement("div",{className:"space-y-2"},e.tools.map((e,t)=>s().createElement("div",{key:t,className:"text-xs p-2 rounded",style:{backgroundColor:a.colors.background.secondary}},s().createElement("div",{className:"font-medium"},e.name),s().createElement("div",{className:"text-secondary"},e.description))))))}function f(e){switch(e){case"healthy":return"check-circle";case"degraded":return"exclamation-triangle";case"unhealthy":case"disconnected":return"times-circle";case"connecting":return"spinner";default:return"question-circle"}}function p(e,t){switch(e){case"healthy":return t.colors.success.main;case"degraded":return t.colors.warning.main;case"unhealthy":case"disconnected":return t.colors.error.main;case"connecting":return t.colors.info.main;default:return t.colors.text.secondary}}}}]);
//# sourceMappingURL=4747.90e64087.js.map